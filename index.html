<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Converter</title>
  <!-- <link href="src/styles/style.css" rel="stylesheet"> -->
  <link rel="manifest" href="https://cedmpi.github.io/a1c-converter/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="DiaCalc">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="icon" type="image/png" sizes="32x32"
    href="https://cedmpi.github.io/a1c-converter/src/images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16"
    href="https://cedmpi.github.io/a1c-converter/src/images/icons/favicon-16x16.png">
  <link rel="apple-touch-icon" href="https://cedmpi.github.io/a1c-converter/src/images/icons/app-icon-144x144.png"
    sizes="144x143">
  <meta name="Description"
    content="eAG/A1C Conversion Calculator, HbA1c to average blood glucose, mg/dl to mmol/l converter">
  <style>
    /* css cache update */
    :root {
      --main-bg-color: #f7f9fc;
      --content-bg-color: #ffffff;
      --input-bg-color: #f0f3f7;
      --font-color: #2e2e2e;
      --accent-color: #4a90e2;
      --shadow-color: rgba(0, 0, 0, 0.08);
      --radius: 4px;
      --control-width: 8.25rem;
    }

    body {
      background-color: var(--main-bg-color);
      color: var(--font-color);
      font-family: "Segoe UI", Roboto, sans-serif;
      line-height: 1.5;
      margin: 0;
    }

    .accessible-elem {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0, 0, 0, 0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }

    input,
    select {
      background-color: var(--input-bg-color);
      color: var(--font-color);
      border: 1px solid #cdd3dc;
      border-radius: var(--radius);
      padding: 0.5rem;
      font-size: 1rem;
      transition: border 0.2s ease, box-shadow 0.2s ease;
      width: var(--control-width);
      box-sizing: border-box;
    }

    input {
      text-align: center;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 4px var(--accent-color);
    }

    /* Remove number spinners */
    .converter input[type="number"]::-webkit-inner-spin-button,
    .converter input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .converter input[type="number"] {
      -moz-appearance: textfield;
      appearance: textfield;
    }

    /* Cards */
    .converter {
      margin: 2em auto;
      text-align: center;
      max-width: 34rem;
      padding: 0 1rem;
    }

    .converter>section {
      background: var(--content-bg-color);
      border-radius: var(--radius);
      padding: 1rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 6px var(--shadow-color);
    }


    .blood-measurement-converter-input,
    .hba1c-converter-input,
    .unit-conv-input {
      display: flex;
      position: relative;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      flex-wrap: nowrap;
      /* keep on one line */
    }

    .unit-conv-input>div,
    .blood-measurement-converter-input>div,
    .hba1c-converter-input>div,
    .first-unit-div {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .unit-conv-input select,
    .blood-measurement-converter-input select,
    .hba1c-converter-input select {
      width: var(--control-width);
    }

    .equation-sign {
      display: inline-block;
      margin: 0 0.25rem;
      font-weight: 600;
      line-height: 1;
      align-self: center;
    }

    #average-percent-increase,
    #output-values {
      display: none;
      background: #f9fafb;
      border-radius: var(--radius);
      box-shadow: 0 1px 6px var(--shadow-color);
      padding: 0.8rem;
      margin: 1rem auto;
      width: 90%;
    }

    .reset-button {
      display: flex;
      justify-content: center;
      align-items: center;
      position: absolute;
      right: 0;
      bottom: 0;
      visibility: hidden;
      border: 1px solid #cdd3dc;
      background-color: #eef2f7;
      color: #333;
      border-radius: var(--radius);
      padding: 0.25rem 0.5rem;
      cursor: pointer;
      height: 2rem;
    }

    .reset-button:hover {
      background-color: #e2e8f0;
    }

    #converter-history {
      visibility: hidden;
      background: var(--content-bg-color);
      border-radius: var(--radius);
      box-shadow: 0 1px 6px var(--shadow-color);
      padding: 1rem;
      margin-top: 1rem;
    }

    #history-value-list li {
      margin: 0.5em 0;
      padding: 0.5em;
      border-radius: var(--radius);
    }

    #history-value-list li:nth-child(odd) {
      background-color: #f4f7fa;
    }

    footer {
      max-width: 34rem;
      margin: 2rem auto;
      background: var(--content-bg-color);
      border-radius: var(--radius);
      box-shadow: 0 1px 6px var(--shadow-color);
      padding: 1rem;
    }

    footer>details {
      margin-top: 1em;
    }

    .tooltip {
      position: relative;
      display: inline-block;
      border-bottom: 1px dotted black;
      cursor: help;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 120px;
      background-color: #555;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 0.5rem;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -60px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .tooltip .tooltiptext::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #555 transparent transparent transparent;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .nutrition-form {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .nutrition-input-container {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
      text-align: left;
    }

    #output-values-nutrition {
      display: flex;
      flex-direction: column;
      align-items: center;
      visibility: hidden;
      margin-top: 1rem;
    }

    .unit-converter .reset-button {
      bottom: unset;
      top: 0;
    }

    @media (max-width: 420px) {
      :root {
        --control-width: 7rem;
      }

      .reset-button {
        right: -1rem;
        background-color: transparent;
        border: none;
      }
    }

    @media (max-width: 350px) {
      :root {
        --control-width: 6rem;
      }

      .blood-measurement-converter-input,
      .hba1c-converter-input,
      .unit-conv-input {
        flex-wrap: wrap;
      }
    }
  </style>
</head>

<body>

  <main class="converter">

    <section class="blood-measurement-converter">
      <h3>mg/dl &harr; mmol/l</h3>

      <div class="blood-measurement-converter-input">
        <label for="mg/dl-converter" class="accessible-elem">mg/dl</label>
        <input placeholder="mg/dl" id="mg/dl-converter" type="number" min="1">
        <span class="equation-sign"> = </span>
        <label for="mmol/l-converter" class="accessible-elem">mmol/l</label>
        <input placeholder="mmol/l" id="mmol/l-converter" type="number">

        <button id="reset-blood-measurement-converter" type="reset" class="reset-button">&#9587</button>

      </div>


      <p id="average-percent-increase">
        blood sugar is ~ <span id="bg-increase-percentage"></span> % above normal
        <span class="tooltip">
          *<span class="tooltiptext">Normal average: 83 mg/dl <br> 4.6 mmol/l</span></span>
      </p>

    </section>

    <section class="calculator-hba1c">
      <h3>HbA1c to eAG converter </h3>

      <div class="hba1c-converter-input">

        <input placeholder="percent" id="hba1c-percent-input" type="number" min="0">
        <span class="equation-sign"> = </span>
        <input placeholder="mmol/mol" id="hba1c-mmoll-input" type="number" min="0">
        <br>

        <label for="hba1c-percent-input" class="accessible-elem">HbA1c percent</label>
        <label for="hba1c-mmoll-input" class="accessible-elem"> HbA1c mmol/mol</label>

        <button id="reset-a1c-input" type="reset" class="reset-button">&#9587</button>
      </div>

      <div id="output-values">

        <p style="line-height: 1.4em">HbA1c of <br> <span id="hba1c-value-percent"></span>
          <span class="vl"></span> <span id="hba1c-value-mmoll"></span><small> mmol/mol</small> <br> is an
          estimated average glucose of
        </p>

        <output for="input-hba1c"> <span id="mgdl-value"></span> <span class="vl"></span> <span
            id="mmoll-value"></span></output>

        <p id="calculator-average-percent">
          blood glucose on average: <br> <span id="hba1c-percent-increase"> </span> above normal <span class="tooltip">
            *<span class="tooltiptext">Normal average: 83 mg/dl <br> 4.6 mmol/l</span></span> </p>
      </div>


    </section>

    <section class="nutrition-converter">
      <h3>Blood Sugar increase of Carbs and Protein</h3>

      <div class="nutrition-form">
        <div style="display: flex; justify-content: center; gap: 1rem; position: relative;">

          <div class="nutrition-input-container">
            <label for="carb-input" class="">Carbohydrates</label>
            <input placeholder="grams..." id="carb-input" type="number">
          </div>

          <div class="nutrition-input-container">
            <label for="protein-input" class="">Protein</label>
            <input placeholder="grams..." id="protein-input" type="number">
          </div>
          <button id="reset-nutrition-input" type="reset" class="reset-button">&#9587</button>
        </div>

        <output id="output-values-nutrition">
          <div style="text-align: left;">
            <div id="estimated-insulin-unit"></div>
            <div id="estimated-glucose-increase"></div>
          </div>
        </output>

      </div>

      <details class="" style="text-align: left; margin-top: 2rem;">
        <summary>Nutritional Notes</summary>
        <small>
          <ul>
            <li> 112g of diced or sliced cooked vegetables</li>
            <li> 75g of whole cooked vegetables </li>
            <li>56g of mashed cooked vegetables</li>
            <li>or 224g of salad</li>
            Acts upon blood sugar as if it contains about 6 grams of carbohydrate.
            <li>1 egg behaves like 7 grams of protein</li>
            <li>Peanuts: 28g contain 6 grams of carbohydrate and close to 14g of protein.</li>
          </ul>
        </small>
      </details>

      <details class="" style="text-align: left;">
        <summary>Important Note</summary>
        <small>
          This calculation will not work for meals that have to many carbohydrates, <br>
          also will not work for large quantities of food; e.g. eating enough to feel stuffed, <br>
          because of the of the
          <a href="https://www.youtube.com/watch?v=O2nAICrb7Ck&t=6s">Chinese Restaurant Effect</a>
          ( a.k.a.
          <a
            href="https://diabetesjournals.org/diabetes/article/72/12/1739/153849/Glucagon-as-the-First-Incretin-Objects-in-the">
            Incretin effect
          </a> )


          <div>

          </div>
          <div>
            <p>
              This calculation is personalized, and assumes:
            </p>
            <ul>
              <li>Not producing any insulin</li>
              <li>Not overweight</li>
              <li>Not being insulin resistant</li>
              <li>Using R-Insulin</li>
              <li>Knowing how much 1 gramm of carbohydrates increases blood glucose (differs per person)</li>
              <li>Not in growth spurt / not growing</li>
              <li>Having read Dr. Bernstein's book Diabetes Solution</li>
            </ul>
          </div>

          <a href="https://www.youtube.com/watch?v=x6eE_kkxXT8&t=21s" target="_blank" rel="noreferrer">
            How to Use R (Regular insulin)</a>


        </small>

      </details>


    </section>
    <!-- weight converter -->
    <section class="unit-converter">
      <h3>weight converter</h3>
      <div class="unit-conv-input">
        <div class="first-unit-div">
          <label for="first-weight-input" class="accessible-elem">first input</label>
          <input placeholder="..." id="first-weight-input" min="0" type="number">
          <div>
            <select id="first-weight-select">
              <option value="kilogram">Kilogram</option>
              <option value="gram">Gram</option>
              <option value="pound">Pound</option>
              <option value="ounce">Ounce</option>
            </select>
            <label for="first-weight-select" class="accessible-elem">weight select one</label>
          </div>
        </div>
        <span class="equation-sign">&asymp;</span>
        <div>
          <label for="secound-weight-input" class="accessible-elem">secound input</label>
          <input placeholder="..." type="number" id="secound-weight-input" min="0">
          <div>
            <select id="secound-weight-select">
              <option value="pound">Pound</option>
              <option value="ounce">Ounce</option>
              <option value="kilogram">Kilogram</option>
              <option value="gram">Gram</option>
            </select>
            <label for="secound-weight-select" class="accessible-elem">weight select two</label>
          </div>
        </div>
        <button id="reset-weight-input" type="reset" class="reset-button">&#9587</button>
        <label for="reset-weight-input" class="accessible-elem">reset input</label>
      </div>
    </section>

    <!-- liquid converter -->
    <section class="unit-converter">
      <h3>liquid converter</h3>
      <div class="unit-conv-input">
        <div class="first-unit-div">
          <label for="first-liquid-input" class="accessible-elem">first input</label>
          <input placeholder="..." type="number" id="first-liquid-input" min="0">
          <div>
            <select id="first-liquid-select">
              <option value="milliliter">Milliliter</option>
              <option value="liter">Liter</option>
              <option value="gallon">Gallon (US)</option>
              <option value="cup">Cup (US)</option>
              <option value="ounce">Fluid Ounce (US)</option>
            </select>
            <label for="first-liquid-select" class="accessible-elem">liquid select one</label>
          </div>
        </div>
        <span class="equation-sign">&asymp;</span>
        <div>
          <label for="secound-liquid-input" class="accessible-elem">secound input</label>
          <input placeholder="..." type="number" id="secound-liquid-input" min="0">
          <div>
            <select id="secound-liquid-select">
              <option value="cup">Cup (US)</option>
              <option value="ounce">Fluid Ounce (US)</option>
              <option value="gallon">Gallon (US)</option>
              <option value="liter">liter</option>
              <option value="milliliter">Milliliter</option>
            </select>
            <label for="secound-liquid-select" class="accessible-elem">liquid select two</label>
          </div>
        </div>
        <button id="reset-liquid-input" type="reset" class="reset-button">&#9587</button>
        <label for="reset-liquid-input" class="accessible-elem">reset input</label>
      </div>
    </section>

    <!-- length converter -->
    <section class="unit-converter">
      <h3>length converter</h3>
      <div class="unit-conv-input">
        <div class="first-unit-div">
          <label for="first-length-input" class="accessible-elem">first input</label>
          <input placeholder="..." type="number" id="first-length-input" min="0">
          <div>
            <select id="first-length-select">
              <option value="meter">meter</option>
              <option value="kilometer">Kilometer</option>
              <option value="centimeter">Centimeter</option>
              <option value="millimeter">Millimeter</option>
              <option value="mile">Mile</option>
              <option value="feet">Feet</option>
              <option value="inch">Inch</option>
            </select>
            <label for="first-length-select" class="accessible-elem">length select one</label>
          </div>
        </div>
        <span class="equation-sign">&asymp;</span>
        <div>
          <label for="secound-length-input" class="accessible-elem">secound input</label>
          <input placeholder="..." type="number" id="secound-length-input" min="0">
          <div>
            <select id="secound-length-select">
              <option value="feet">Feet</option>
              <option value="mile">Mile</option>
              <option value="inch">Inch</option>
              <option value="kilometer">Kilometer</option>
              <option value="meter">meter</option>
              <option value="centimeter">Centimeter</option>
              <option value="millimeter">Millimeter</option>
            </select>
            <label for="secound-length-select" class="accessible-elem">length select two</label>
          </div>
        </div>
        <button id="reset-length-input" type="reset" class="reset-button">&#9587</button>
        <label for="reset-length-input" class="accessible-elem">reset input</label>
      </div>
    </section>
    <div class="show-converter-history">
      <button id="show-history-button" class="" type="button"> &#9716; </button>
      <br>
      <label for="show-history-button">History</label>
    </div>


    <section id="converter-history">

      <span class="historyflex">
        <h3> Converter History</h3>
        <button id="close-history" type="button" class="">&#9587</button>
        <label class="accessible-elem" for="close-history">close history</label>
      </span>
      <hr>
      <div>
        <ul id="history-value-list"></ul>
      </div>

      <span class="reset-history">
        <span>
          <button id="reset-history-button" class="history-button-style" type="reset" class="">&#128465;</button>
          <br>
          <label for="reset-history-button">delete</label>
        </span>
      </span>

    </section>
  </main>


  <footer>

    <details>
      <summary>A1C formula</summary>
      <p> (35.6 × HgbA1C) – 77.3 mg/dl <sup> <a href="https://www.ncbi.nlm.nih.gov/pubmed/11815495" target="_blank"
            rel="noreferrer">[1]</a></sup>
      </p>

    </details>
    <details>
      <summary>Normal fasting blood sugar </summary>
      <p>Adult: 83 mg/dl (4.6 mmol/l) <sup> <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5557842/"
            target="_blank" rel="noreferrer">[2]</a> </sup> </p>
    </details>

  </footer>

  <script src="src/js/utils.js" type="module"></script>
  <script src="src/js/main.js" type="module"></script>
  <script src="src/js/unit-converter.js" type="module"></script>

</body>

</html>
